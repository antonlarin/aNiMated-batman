<!DOCTYPE html>
<html>
<head>
	<title>Heat Equation Solver</title>
	<!--third party css-->
	<link rel="stylesheet" type="text/css" href="css/vendor/semantic.min.css">
	<link rel="stylesheet" type="text/css" href="css/vendor/jquery.jqplot.min.css">
	<!--application css-->
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<!--third party js-->
	<script type="text/javascript" src="js/vendor/jquery-2.1.1.min.js"></script>	
	<script type="text/javascript" src="js/vendor/knockout-3.2.0.js"></script>	
	<script type="text/javascript" src="js/vendor/semantic.min.js"></script>
	<script type="text/javascript" src="js/vendor/jquery.jqplot.min.js"></script>
	<!--application js-->
	<script type="text/javascript" src="bootstrap.js"></script>
	<script type="text/javascript" src="js/hesproject.js"></script>
</head>
<body ondragstart="return false;" ondrop="return false;" class="ui two column page grid">
	<aside class="six wide column">
		<h1 class="header">Heat equation solver</h1>
		<form class="ui small form">
			<div class="grouped inline fluid fields">
				<div class="field">
					<img src="images/rhs.gif" />
					<input type="text" data-bind="textInput: solverRHSFunction" />
				</div>
				<div class="field">
					<img src="images/ic.gif" />
					<input type="text" data-bind="textInput: solverInitConditions" />
				</div>
				<div class="field">
					<img src="images/lbc.gif" />
					<input type="text" data-bind="textInput: solverLeftConditions" />
				</div>
				<div class="field">
					<img src="images/rbc.gif" />
					<input type="text" data-bind="textInput: solverRightConditions" />
				</div>
				<div class="field">
					<label>Time grid nodes</label>
					<input type="text" data-bind="textInput: solverDimensionsT" />
				</div>
				<div class="field">
					<label>Space grid nodes</label>
					<input type="text" data-bind="textInput: solverDimensionsX" />
				</div>
				<div class="field">
					<label>Time limit</label>
					<input type="text" data-bind="textInput: solverTimeLimit" />
				</div>
				<div class="field">
					<label>Solver type</label>
					<select class="ui selection dropdown"
									data-bind="options: solverDescriptors,
														 optionsText: 'name',
														 value: solverSelectedDescriptor">
					</select>
				</div>
			</div>
			<button class="ui blue button" data-bind="click: solveClick">Solve</button>
		</form>
	</aside>
	<main class="ten wide column">
		<div>
			<div class="ui menu" data-bind="visible: taskIsSolved()">
				<a class="item" data-bind="css: { active : !showingTable }">Layers</a>
				<a class="item" data-bind="css: { active: showingTable }">Table</a>
			</div>
			<div class="ui center aligned segment" data-bind="visible: !taskIsSolved()">
				<label>Set parameters and hit SOLVE</label>
			</div>
			<div>
				<table class="ui celled compact table segment"
							 data-bind="visible: taskIsSolved() && showingTable">
					<tbody data-bind="foreach: displayedTable">
				<tr data-bind="foreach: $data">
					<td data-bind="text: $data"></td>
				</tr>
			</tbody>
		</table>
			</div>
			<div data-bind="visible: taskIsSolved() && !showingTable">
				<button class="ui icon button" data-bind="disable: isFirstLayer(),
																									click: changeLayer(-1),
																									css: { disabled: isFirstLayer() }">
					<i class="left arrow icon"></i>
				</button>
				<label data-bind="text: 'Layer ' + (currentLayer() + 1) + ' of ' +
														(solverDimensionsX() + 1)"></label>
				<button class="ui icon button" data-bind="disable: isLastLayer(),
																									click: changeLayer(1),
																									css: { disabled: isLastLayer() }">
					<i class="right arrow icon"></i>
				</button>
			</div>
			<div id="plotOutput" data-bind="visible: !showingTable">
			</div>
		</div>
	</main>

	<script type="text/javascript">
	$(window).on("modelError", function(ev, ex) {
		alert(ex);
		console.log(ex);
	});

	var vm = hesproject.getMainModel();
	ko.applyBindings(vm);
	</script>

</body>
</html>